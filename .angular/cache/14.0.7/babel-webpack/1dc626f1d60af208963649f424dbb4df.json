{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/review.service\";\nimport * as i2 from \"@auth0/auth0-angular\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\n\nfunction ReviewSubmitComponent_button_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 17);\n    i0.ɵɵtext(1, \" Write a Review!\\n\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵattribute(\"disabled\", ctx_r0.isReviewed ? \"disabled\" : null);\n  }\n}\n\nexport class ReviewSubmitComponent {\n  constructor(reviewService, auth, router) {\n    this.reviewService = reviewService;\n    this.auth = auth;\n    this.router = router;\n    this.productId = 0;\n    this.isReviewed = false;\n    this.stars = 0;\n    this.title = '';\n    this.review = '';\n  }\n\n  ngOnInit() {}\n  /**\n   * Submits a review with product given.\n   */\n\n\n  submitReview() {\n    var _a;\n\n    this.reviewService.postReview(this.productId, this.stars, this.title, this.review).subscribe(() => {\n      this.isReviewed = true;\n      this.router.navigate(['']);\n    }, error => console.log(error));\n    (_a = document.getElementById('modal-close')) === null || _a === void 0 ? void 0 : _a.click();\n  }\n\n}\n\nReviewSubmitComponent.ɵfac = function ReviewSubmitComponent_Factory(t) {\n  return new (t || ReviewSubmitComponent)(i0.ɵɵdirectiveInject(i1.ReviewService), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.Router));\n};\n\nReviewSubmitComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ReviewSubmitComponent,\n  selectors: [[\"app-review-submit\"]],\n  inputs: {\n    productId: \"productId\",\n    isReviewed: \"isReviewed\"\n  },\n  decls: 24,\n  vars: 7,\n  consts: [[\"class\", \"btn btn-primary\", \"data-toggle\", \"modal\", \"data-target\", \"#reviewModal\", 4, \"ngIf\"], [\"id\", \"reviewModal\", \"tabindex\", \"-1\", \"aria-labelledby\", \"reviewModalLabel\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [1, \"modal-dialog\"], [1, \"modal-content\"], [1, \"modal-header\"], [\"id\", \"reviewModalLabel\", 1, \"modal-title\"], [\"id\", \"modal-close\", \"type\", \"button\", \"data-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"btn-close\"], [3, \"ngSubmit\"], [1, \"modal-body\"], [\"for\", \"stars\"], [\"type\", \"number\", \"name\", \"rating\", \"min\", \"1\", \"max\", \"5\", \"id\", \"stars\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"title\"], [\"type\", \"text\", \"name\", \"title\", \"required\", \"\", \"id\", \"title\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"content\"], [\"name\", \"content\", \"required\", \"\", \"id\", \"content\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"modal-footer\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\"], [\"data-toggle\", \"modal\", \"data-target\", \"#reviewModal\", 1, \"btn\", \"btn-primary\"]],\n  template: function ReviewSubmitComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, ReviewSubmitComponent_button_0_Template, 2, 1, \"button\", 0);\n      i0.ɵɵpipe(1, \"async\");\n      i0.ɵɵelementStart(2, \"div\", 1)(3, \"div\", 2)(4, \"div\", 3)(5, \"div\", 4)(6, \"h5\", 5);\n      i0.ɵɵtext(7, \"Write a Review\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(8, \"button\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"form\", 7);\n      i0.ɵɵlistener(\"ngSubmit\", function ReviewSubmitComponent_Template_form_ngSubmit_9_listener() {\n        return ctx.submitReview();\n      });\n      i0.ɵɵelementStart(10, \"div\", 8)(11, \"label\", 9);\n      i0.ɵɵtext(12, \"Rating\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"input\", 10);\n      i0.ɵɵlistener(\"ngModelChange\", function ReviewSubmitComponent_Template_input_ngModelChange_13_listener($event) {\n        return ctx.stars = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"label\", 11);\n      i0.ɵɵtext(15, \"Title\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"input\", 12);\n      i0.ɵɵlistener(\"ngModelChange\", function ReviewSubmitComponent_Template_input_ngModelChange_16_listener($event) {\n        return ctx.title = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"label\", 13);\n      i0.ɵɵtext(18, \"Review\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"textarea\", 14);\n      i0.ɵɵlistener(\"ngModelChange\", function ReviewSubmitComponent_Template_textarea_ngModelChange_19_listener($event) {\n        return ctx.review = $event;\n      });\n      i0.ɵɵtext(20);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(21, \"div\", 15)(22, \"button\", 16);\n      i0.ɵɵtext(23, \"Save changes\");\n      i0.ɵɵelementEnd()()()()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(1, 5, ctx.auth.isAuthenticated$));\n      i0.ɵɵadvance(13);\n      i0.ɵɵproperty(\"ngModel\", ctx.stars);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.title);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.review);\n      i0.ɵɵadvance(1);\n      i0.ɵɵtextInterpolate(ctx.review);\n    }\n  },\n  dependencies: [i4.NgIf, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NumberValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.RequiredValidator, i5.MinValidator, i5.MaxValidator, i5.NgModel, i5.NgForm, i4.AsyncPipe],\n  styles: [\".w-800[_ngcontent-%COMP%] {\\n    max-width: 800px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJldmlldy1zdWJtaXQuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGdCQUFnQjtBQUNwQiIsImZpbGUiOiJyZXZpZXctc3VibWl0LmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIudy04MDAge1xuICAgIG1heC13aWR0aDogODAwcHg7XG59Il19 */\"]\n});","map":{"version":3,"mappings":";;;;;;;;;IAAAA;IAOEA;IACFA;;;;;IAHEA;;;;ACKF,OAAM,MAAOC,qBAAP,CAA4B;EAQhCC,YAAmBC,aAAnB,EAAwDC,IAAxD,EAAmFC,MAAnF,EAAiG;IAA9E;IAAqC;IAA2B;IAP1E,iBAAoB,CAApB;IACA,kBAAsB,KAAtB;IAET,aAAgB,CAAhB;IACA,aAAgB,EAAhB;IACA,cAAiB,EAAjB;EAEsG;;EAEtGC,QAAQ,IAAY;EAEpB;;;;;EAGAC,YAAY;;;IACV,KAAKJ,aAAL,CACGK,UADH,CACc,KAAKC,SADnB,EAC8B,KAAKC,KADnC,EAC0C,KAAKC,KAD/C,EACsD,KAAKC,MAD3D,EAEGC,SAFH,CAGI,MAAK;MACH,KAAKC,UAAL,GAAkB,IAAlB;MACA,KAAKT,MAAL,CAAYU,QAAZ,CAAqB,CAAC,EAAD,CAArB;IAED,CAPL,EAQKC,KAAD,IAAWC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CARf;IAUA,cAAQ,CAACG,cAAT,CAAwB,aAAxB,OAAsC,IAAtC,IAAsCC,aAAtC,GAAsC,MAAtC,GAAsCA,GAAEC,KAAF,EAAtC;EACD;;AA3B+B;;;mBAArBpB,uBAAqBD;AAAA;;;QAArBC;EAAqBqB;EAAAC;IAAAd;IAAAK;EAAA;EAAAU;EAAAC;EAAAC;EAAAC;IAAA;MDVlC3B;;MAUAA,+BAMC,CAND,EAMC,KAND,EAMC,CAND,EAMC,CAND,EAMC,KAND,EAMC,CAND,EAMC,CAND,EAMC,KAND,EAMC,CAND,EAMC,CAND,EAMC,IAND,EAMC,CAND;MAUsDA;MAAcA;MAC5DA;MAOFA;MACAA;MAAMA;QAAA,OAAY4B,kBAAZ;MAA0B,CAA1B;MACJ5B,gCAAwB,EAAxB,EAAwB,OAAxB,EAAwB,CAAxB;MACqBA;MAAMA;MACzBA;MACEA;QAAA;MAAA;MADFA;MASAA;MAAmBA;MAAKA;MACxBA;MACEA;QAAA;MAAA;MADFA;MAQAA;MAAqBA;MAAMA;MAC3BA;MACEA;QAAA;MAAA;MAKCA;MAAYA;MAGjBA,iCAA0B,EAA1B,EAA0B,QAA1B,EAA0B,EAA1B;MACgDA;MAAYA;;;;MA5DjEA;MAgCSA;MAAAA;MAUAA;MAAAA;MASAA;MAAAA;MAKCA;MAAAA","names":["i0","ReviewSubmitComponent","constructor","reviewService","auth","router","ngOnInit","submitReview","postReview","productId","stars","title","review","subscribe","isReviewed","navigate","error","console","log","getElementById","_a","click","selectors","inputs","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/Users/andrewhughes/Desktop/project3/e-commerce-frontend-angular/src/app/components/review-submit/review-submit.component.html","/Users/andrewhughes/Desktop/project3/e-commerce-frontend-angular/src/app/components/review-submit/review-submit.component.ts"],"sourcesContent":["<button\n  *ngIf=\"auth.isAuthenticated$ | async\"\n  class=\"btn btn-primary\"\n  data-toggle=\"modal\"\n  data-target=\"#reviewModal\"\n  [attr.disabled]=\"isReviewed ? 'disabled' : null\"\n>\n  Write a Review!\n</button>\n\n<div\n  class=\"modal fade\"\n  id=\"reviewModal\"\n  tabindex=\"-1\"\n  aria-labelledby=\"reviewModalLabel\"\n  aria-hidden=\"true\"\n>\n  <div class=\"modal-dialog\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <h5 class=\"modal-title\" id=\"reviewModalLabel\">Write a Review</h5>\n        <button\n          id=\"modal-close\"\n          type=\"button\"\n          class=\"btn-close\"\n          data-dismiss=\"modal\"\n          aria-label=\"Close\"\n        ></button>\n      </div>\n      <form (ngSubmit)=\"submitReview()\">\n        <div class=\"modal-body\">\n          <label for=\"stars\">Rating</label>\n          <input\n            [(ngModel)]=\"stars\"\n            class=\"form-control\"\n            type=\"number\"\n            name=\"rating\"\n            min=\"1\"\n            max=\"5\"\n            id=\"stars\"\n          />\n          <label for=\"title\">Title</label>\n          <input\n            [(ngModel)]=\"title\"\n            class=\"form-control\"\n            type=\"text\"\n            name=\"title\"\n            required\n            id=\"title\"\n          />\n          <label for=\"content\">Review</label>\n          <textarea\n            [(ngModel)]=\"review\"\n            name=\"content\"\n            class=\"form-control\"\n            required\n            id=\"content\"\n            >{{ review }}</textarea\n          >\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"submit\" class=\"btn btn-primary\">Save changes</button>\n        </div>\n      </form>\n    </div>\n  </div>\n</div>\n","import { ReviewService } from '../../services/review.service';\nimport { Component, Input, OnInit } from '@angular/core';\nimport { AuthService } from '@auth0/auth0-angular';\nimport { Router } from \"@angular/router\";\n\n@Component({\n  selector: 'app-review-submit',\n  templateUrl: './review-submit.component.html',\n  styleUrls: ['./review-submit.component.css'],\n})\nexport class ReviewSubmitComponent implements OnInit {\n  @Input() productId: number = 0;\n  @Input() isReviewed: boolean = false;\n\n  stars: number = 0;\n  title: string = '';\n  review: string = '';\n\n  constructor(public reviewService: ReviewService, public auth: AuthService, private router: Router) { }\n\n  ngOnInit(): void { }\n\n  /**\n   * Submits a review with product given.\n   */\n  submitReview() {\n    this.reviewService\n      .postReview(this.productId, this.stars, this.title, this.review)\n      .subscribe(\n        () => {\n          this.isReviewed = true;\n          this.router.navigate([''])\n\n        },\n        (error) => console.log(error)\n      );\n    document.getElementById('modal-close')?.click();\n  }\n}\n"]},"metadata":{},"sourceType":"module"}